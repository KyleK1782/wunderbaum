/*!
 * Wunderbaum style sheet (generated from wunderbaum.scss)
 * Copyright (c) 2021, Martin Wendt. Released under the MIT license.
 * @VERSION, @DATE (https://github.com/mar10/wunderbaum)
 */

/*
  * Some nice colors
  */
$clr-black-olive: #2d342c;
$clr-black: #1c1b19;
$clr-bronze: #816540;
$clr-gray: #868581;
$clr-midnight-blue: #1e2e47;
$clr-milk: #fcfcfc;
$clr-patina-green: #29806d;
$clr-petrol: #005c75;
$clr-signal-blue: #1e5494;
$clr-slate: #47423f;
$clr-sunflower: #f7a600;
$clr-translucent-green: #94bd31;
$clr-translucent-red: #b5373b;
$clr-umbra-gray: #56534c;

$font-stack: Helvetica, sans-serif;

$node-text-color: #56534c;
$error-color: #b5373b;
$hover-color: #f7f7f7;
$hover-border-color: #dedede;
$focus-border-color: #969da3;
$grid-color: #dedede;
$active-color: #e5f3fb;
$active-cell-color: #26a0da;
$active-border-color: #70c0e7;
$active-hover-color: #cbe8f6;
$active-hover-border-color: #26a0da;
$background-color: $clr-milk;
$active-column-color: $hover-color;
$active-header-column-color: $active-color;
$filter-dimm-color: #dedede;
$filter-submatch-color: #868581;

$row-height: 20px;
$header-height: $row-height;

$level-rainbow: rgba(255, 255, 64, 0.07), rgba(127, 255, 127, 0.07),
  rgba(255, 127, 255, 0.07), rgba(79, 236, 236, 0.07);

div.wunderbaum {
  height: 100%; // fill parent container
  box-sizing: border-box;
  margin: 0;
  padding: 0;

  font-family: $font-stack;
  font-size: 14px;
  // line-height: 20px;

  color: $node-text-color;
  border: 1px solid gray;
  overflow: hidden; // avoid unwanted effects when auto-resizing

  // &:focus,
  // &:focus-within {
  //   border-color: $active-border-color;
  // }

  div.wb-header {
    position: relative;
    height: $header-height;
    border-bottom: 1px solid gainsboro;
    span.wb-col {
      font-weight: bold;
      &:hover {
        background-color: $active-hover-color;
      }
      // &::after {
      //   content: "|";
      // }
    }
    div.wb-row {
      span.wb-col.wb-active {
        background-color: $active-hover-color;
      }
    }
  }

  div.wb-scroll-container {
    overflow: auto;
    scroll-behavior: smooth;
    position: relative;
    min-height: 4px;
    // height: calc(100% - #{$header-height});  // didn't work. Using JS instead
    // padding: 0 4px;

    div.wb-row {
      position: absolute;
      width: 100%;
      height: $row-height + 2;
      line-height: $row-height - 1;
      border: 1px solid transparent;
      // &:last-of-type {
      //   border-bottom: 1px solid transparent;
      // }
      // &.wb-selected {
      //   font-style: italic;
      // }
      &:hover {
        background-color: $hover-color;
        border-color: $hover-border-color;
      }
      &.wb-active,
      &.wb-selected {
        background-color: $active-color;
        border-color: $active-border-color;
        &:hover {
          background-color: $active-hover-color;
          border-color: $active-hover-border-color;
        }
      }
      &.wb-active.wb-selected {
        background-color: $active-hover-color;
        &:hover {
          background-color: $active-hover-color;
        }
      }
      &.wb-loading {
        font-style: italic;
      }
      &.wb-error,
      &.wb-status-error {
        color: $error-color;
      }
    }
    span.wb-node {
      user-select: none;
      // &:first-of-type {
      //   margin-left: 8px; // leftmost icon gets a little margin
      // }
    }

    i.wb-checkbox,
    i.wb-expander,
    i.wb-icon,
    i.wb-indent {
      width: 1.1em;
      display: inline-block;
      height: $row-height;
      // margin-right: 3px;
      // font-size: small;
      // vertical-align: middle;
    }
    i.wb-indent {
      // border-left: 1px solid gray;
      &::before {
        content: "\00a0";
      }
    }
    i.wb-icon.wb-spin {
      height: unset; // Prevent wobble
      width: unset;
      padding: 0 3px;
      animation: wb-spin 2s linear infinite;
    }
  }

  span.wb-title {
    min-width: 1em;
    display: inline-block; // fix vertical offset on Chrome?
    vertical-align: top;
    overflow-x: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  span.wb-col {
    position: absolute;
    display: inline-block;
    text-overflow: ellipsis;
    padding: 0 4px;
    // height: $row-height;
    // vertical-align: top;
    &:last-of-type {
      border-right: none;
    }
  }

  /*
   */
  &.wb-grid {
    div.wb-node-list div.wb-row {
      border-bottom: 1px solid $grid-color;
      span.wb-col {
        border-right: 1px solid $grid-color;
      }
    }
    &.wb-cell-mode {
      div.wb-row {
        background-color: $background-color;
        span.wb-col.wb-active {
          background-color: $active-column-color;
        }
        &.wb-active {
          background-color: $active-column-color;
          span.wb-col.wb-active {
            background-color: $active-cell-color;
          }
        }
      }
    }
  }

  &.wb-ext-filter-dimm,
  &.wb-ext-filter-hide {
    div.wb-node-list div.wb-row {
      color: $filter-dimm-color;
      &.wb-submatch {
        color: $filter-submatch-color;
      }
      &.wb-match {
        color: $node-text-color;
      }
    }
  }

  &.wb-rainbow {
    @for $i from 1 through length($level-rainbow) {
      i.wb-indent:nth-child(#{length($level-rainbow)}n + #{$i}) {
        background: nth($level-rainbow, $i);
      }
    }
  }
}

@keyframes wb-spin {
  0% {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(1turn);
  }
}
