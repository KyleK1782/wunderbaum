!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).mar10={})}(this,(function(e){"use strict";
/*!
     * persisto.js - utils
     * Copyright (c) 2021, Martin Wendt. Released under the MIT license.
     * v0.0.1-0, Sun, 28 Feb 2021 13:30:59 GMT (https://github.com/mar10/wunderbaum)
     */function t(e,t){if(!e)throw t=t||"Assertion failed.",new Error(t)}function i(){}
/*!
     * wunderbaum.ts
     *
     * A tree control.
     *
     * Copyright (c) 2021, Martin Wendt (https://wwWendt.de).
     * Released under the MIT license.
     *
     * @version v0.0.1-0
     * @date Sun, 28 Feb 2021 13:30:59 GMT
     */var n;!function(e){e.any="any",e.children="children",e.status="status"}(n||(n={}));class o{constructor(e,i,n){this.refKey=void 0,this.children=null,this.lazy=!1,this.expanded=!1,this.selected=!1,this._rowIdx=0,this._rowElem=void 0,t(i.tree===e),this.tree=e,this.parent=i,this.title=n.title||"?",this.key=void 0===n.key?""+ ++o.sequence:""+n.key}toString(){return"WunderbaumNode@"+this.key+"<'"+this.title+"'>"}visit(e,t=!1){}setExpanded(e=!0){this.expanded=e}render(){}addChild(e,i){null==this.children?this.children=[e]:i?t(!1):this.children.push(e)}}o.sequence=0;class r{constructor(e){this.keyMap={},this.refKeyMap={},this.rows=[],this.activeNode=null,this.root=new o(this,null,{key:"__root__",name:"__root__"});let t=this.opts=function(...e){for(let t=1;t<e.length;t++){let i=e[t];for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[0][t]=i[t])}return e[0]}({source:null,element:null,debugLevel:1,change:i,error:i},e);this.name=t.name||"wb_"+ ++r.sequence,t.source&&this.load(t.source)}toString(){return"Wunderbaum<'"+this.name+"'>"}debug(...e){this.opts.debugLevel>=2&&(Array.prototype.unshift.call(e,this.toString()),console.log.apply(console,e))}log(...e){this.opts.debugLevel>=1&&(Array.prototype.unshift.call(e,this.toString()),console.log.apply(console,e))}logTime(e){return this.opts.debugLevel>=1&&console.time(e),e}logTimeEnd(e){this.opts.debugLevel>=1&&console.timeEnd(e)}visit(e,t=!1){return this.root.visit(e,!1)}renumber(){let e=this.logTime("renumber");this.root.visit((function(e){}),!1),this.logTimeEnd(e)}load(e){return this._load(this.root,e)}addChildren(e,i){var r;t((r=i,Array.isArray(r)));for(let t=0;i.length;t++){let n=i[t];n.children,delete n.children;let r=new o(this,e,n);e.addChild(r),n.children&&this.addChildren(r,n.children);break}this.setModified(e,n.children)}enableUpdate(e,t){return!0}setModified(e,t){}_load(e,t){let i=this.opts;i.debugLevel>=2&&console.time&&console.time(this+"._load");let n=this;return new Promise((function(t,o){fetch(i.source,{method:"GET"}).then((function(e){return e.ok?i.pull.call(n,e):function(e){throw new Error(e)}("GET "+i.remote+" returned "+e.status+", "+e),e.json()})).then((function(i){n.addChildren.call(n,e,i),t(e)})).catch((function(){console.error(arguments),o(e),i.error.call(n,arguments)})).finally((function(){i.debugLevel>=2&&console.time&&console.timeEnd(n+"._load")}))}))}}r.version="v0.0.1-0",r.sequence=0,e.Wunderbaum=r,e.WunderbaumNode=o,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=wunderbaum.umd.min.js.map